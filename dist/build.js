(()=>{var t={104:()=>{Vue.component("cart_item",{template:'<div :data-id="id" class="cart-item"><img src="./img/img.jpg" alt="img" class="cart-img" width="145"><div class="cart-info"><h3 class="cart-title">{{ title }}</h3>   <p class="cart-price">{{ price }}</p><div class="quantity"><button class="plus-button" type="button" :id="id" v-on:click="buttonplus">+</button><p class="quantity-text" :data-id="id">{{ quantity}}</p><button class="minus-button" type="button" :id="id" v-on:click="buttonminus">-</button></div><button class="del-button" type="button" v-on:click="removeFromCartHandler">Удалить</button></div>',props:["title","price","id","quantity"],methods:{removeFromCartHandler(t){this.$emit("remove",t)},buttonplus(t){console.log(t),this.$emit("buttonplus",t)},buttonminus(t){this.$emit("buttonminus",t)}}})},930:()=>{Vue.component("goods_item",{template:'<div :data-id="id" class="goods-item"><img src="./img/img.jpg" alt="img" class="goods-img" width="145"><h3 class="goods-title">{{ title }}</h3><p class="goods-price">{{ price }}</p><button class="add-button" type="button" v-on:click="addToCart">Добавить</button></div>',props:["title","price","id"]})},840:()=>{Vue.component("search",{template:'<input id="search" v-model="search" v-on:input="searchHandler">',data:()=>({search:""}),methods:{searchHandler(){this.$emit("search",this.search)}}})}},o={};function e(i){var s=o[i];if(void 0!==s)return s.exports;var n=o[i]={exports:{}};return t[i](n,n.exports,e),n.exports}(()=>{"use strict";e(840),e(930),e(104),Vue.component("cart",{template:'<div class="cart-goods"><cart_item \n          v-on:remove="removeFromCartHandler" \n          v-on:buttonplus="buttonplus" \n          v-on:buttonminus="buttonminus"\n          v-for="good in cart" \n          v-bind:title="good.title" \n          v-bind:price="good.price"\n          v-bind:quantity="quantity"\n          v-bind:id="good.id"\n        /></div>',props:["cart"],data:()=>({quantity:1}),methods:{removeFromCartHandler(t){const o=t.target.closest(".cart").dataset.id,e=this.cart.findIndex((t=>t.id==o));this.cart.splice(e-1,1),fetch("/cart",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o})})},buttonplus(t){console.log(t.currentTarget.id)},buttonminus(t){console.log(t.target)}}}),cart,new Vue({el:"#app",data:{cart:[],goods:[],filtredGoods:[],isLoaded:!1},methods:{addToCartHandler(t){const o=t.target.closest(".goods-item").dataset.id,e=this.goods.find((t=>t.id==o));fetch("/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),this.cart.push(e)},searchHandler(t){""===t&&(this.filtredGoods=this.goods);const o=new RegExp(t,"gi");this.filtredGoods=this.goods.filter((t=>o.test(t.title)))},showCart(){document.querySelector(".cart").classList.toggle("display-block"),document.querySelector(".cart").classList.toggle("visually-hidden")},fetchPromise(t,o){return new Promise(((t,o)=>{this.fetch(o,t)}))}},mounted(){fetch("/catalogData").then((t=>t.json())).then((t=>{this.goods=t,this.filtredGoods=t,this.isLoaded=!0})).catch((t=>{console.log(t)})),fetch("/cart").then((t=>t.json())).then((t=>{this.cart=t})).catch((t=>{console.log(t)}))}})})()})();